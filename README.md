# ๐งพ CRM Backend

**CRM Backend** โ ััะพ ัะตัะฒะตัะฝะฐั ัะฐััั ัะธััะตะผั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะพัะปะฐะนะฝ-ะผะฐะณะฐะทะธะฝะฐะผะธ ะพะดะตะถะดั. ะะฝะฐ ะฟะพะทะฒะพะปัะตั ัะพะทะดะฐะฒะฐัั ะผะฐะณะฐะทะธะฝั, ะดะพะฑะฐะฒะปััั ัะพัััะดะฝะธะบะพะฒ ะธ ัะพะฒะฐัั, ัะฟัะฐะฒะปััั ะธะผะธ ะธ ัะปะตะดะธัั ะทะฐ ะฐะบัะธะฒะฝะพัััั.

ะัะพะตะบั ะฟะพัััะพะตะฝ ะฝะฐ **Go**, ะธัะฟะพะปัะทัะตั **PostgreSQL** ะธ ัะตะฐะปะธะทัะตั ะฐะฒัะพัะธะทะฐัะธั ัะตัะตะท **JWT**, ะฐ ัะฐะบะถะต ะดะพะบัะผะตะฝัะธัะพะฒะฐะฝ ั ะฟะพะผะพััั **Swagger**.

---

## ๐ง ะกัะตะบ ัะตัะฝะพะปะพะณะธะน

- ๐ฆ Go (Golang)
- ๐ PostgreSQL
- ๐ฆ pgx (PostgreSQL ะดัะฐะนะฒะตั)
- ๐งช Chi router + middleware
- ๐ JWT (golang-jwt)
- ๐ bcrypt (ะดะปั ัะตัะธัะพะฒะฐะฝะธั ะฟะฐัะพะปะตะน)
- ๐ Swagger (swaggo)
- ๐ณ Docker + Docker Compose

---

## ๐ ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั

### ๐ ะััะตะฝัะธัะธะบะฐัะธั
- `POST /auth/login` โ ะปะพะณะธะฝ ะฟะพ email ะธ ะฟะฐัะพะปั
- `GET /auth/me` โ ัะตะบััะธะน ะฟะพะปัะทะพะฒะฐัะตะปั ะฟะพ ัะพะบะตะฝั

### ๐ ะะดะผะธะฝ (`superadmin`)
- `POST /admin/users` โ ัะพะทะดะฐัั ะฟะพะปัะทะพะฒะฐัะตะปั
- `GET /admin/users` โ ัะฟะธัะพะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- `PUT /admin/users/{id}` โ ะพะฑะฝะพะฒะธัั ะฟะพะปัะทะพะฒะฐัะตะปั
- `DELETE /admin/users/{id}` โ ัะดะฐะปะธัั ะฟะพะปัะทะพะฒะฐัะตะปั
- `POST /admin/shops` โ ัะพะทะดะฐัั ะผะฐะณะฐะทะธะฝ
- `GET /admin/shops` โ ัะฟะธัะพะบ ะฒัะตั ะผะฐะณะฐะทะธะฝะพะฒ

### ๐ช ะะปะฐะดะตะปะตั (`owner`)
- `GET /owner/shops` โ ะฟะพะปััะธัั ัะฒะพะธ ะผะฐะณะฐะทะธะฝั
- `POST /owner/shops/{id}/employees` โ ะดะพะฑะฐะฒะธัั ัะพัััะดะฝะธะบะฐ
- `GET /owner/shops/{id}/employees` โ ัะฟะธัะพะบ ัะพัััะดะฝะธะบะพะฒ
- `DELETE /owner/shops/{id}/employees/{employee_id}` โ ัะดะฐะปะธัั ัะพัััะดะฝะธะบะฐ

### ๐ฆ ะขะพะฒะฐัั
- `POST /owner/shops/{shopID}/items` โ ะดะพะฑะฐะฒะธัั ัะพะฒะฐั
- `GET /owner/shops/{shopID}/items` โ ัะฟะธัะพะบ ัะพะฒะฐัะพะฒ
- `GET /owner/shops/{shopID}/items/{itemID}` โ ะฟะพะปััะธัั ัะพะฒะฐั
- `PUT /owner/shops/{shopID}/items/{itemID}` โ ะพะฑะฝะพะฒะธัั ัะพะฒะฐั
- `DELETE /owner/shops/{shopID}/items/{itemID}` โ ัะดะฐะปะธัั ัะพะฒะฐั

---

## ๐งโ๐ผ ะะพะปะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน

- `superadmin` โ ะฐะดะผะธะฝะธัััะฐัะพั ะฒัะตะน ัะธััะตะผั
- `owner` โ ะฒะปะฐะดะตะปะตั ะพะดะฝะพะณะพ ะธะปะธ ะฝะตัะบะพะปัะบะธั ะผะฐะณะฐะทะธะฝะพะฒ
- `employee` โ ัะพัััะดะฝะธะบ ะผะฐะณะฐะทะธะฝะฐ

---

## ๐๏ธ ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

### ๐ 1. ะกะพะทะดะฐะน ัะฐะนะป `.env`

```env
POSTGRES_USER=crm_user
POSTGRES_PASSWORD=crm_pass
POSTGRES_DB=crm_db

๐ณ 2. ะะฐะฟัััะธ Docker
docker-compose up --build
API ะฑัะดะตั ะดะพัััะฟะตะฝ ะฟะพ ะฐะดัะตัั:
๐ http://localhost:8080
Swagger-ะดะพะบัะผะตะฝัะฐัะธั:
๐ http://localhost:8080/swagger/index.html

๐ JWT ะะฒัะพัะธะทะฐัะธั

ะะพัะปะต ะปะพะณะธะฝะฐ:

POST /auth/login
{
  "email": "admin@crm.kz",
  "password": "superAdmin123"
}
ะั ะฟะพะปััะธัะต:

{
  "token": "..."
}
ะะตัะตะดะฐะฒะฐะนัะต ะตะณะพ ะฒ ะทะฐะณะพะปะพะฒะบะฐั:

Authorization: Bearer <token>
๐ Swagger

ะะปั ะณะตะฝะตัะฐัะธะธ ะดะพะบัะผะตะฝัะฐัะธะธ:

go install github.com/swaggo/swag/cmd/swag@latest
swag init
ะัะบัััั ะฒ ะฑัะฐัะทะตัะต:
๐งญ http://localhost:8080/swagger/index.html

๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

crm-backend/
โโโ internal/
โ   โโโ admin/        // ัะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ
โ   โโโ auth/         // JWT, middleware
โ   โโโ db/           // ะฟะพะดะบะปััะตะฝะธะต ะบ PostgreSQL
โ   โโโ employee/     // ัะพัััะดะฝะธะบะธ ะผะฐะณะฐะทะธะฝะพะฒ
โ   โโโ shop/         // ะผะฐะณะฐะทะธะฝั ะธ ัะพะฒะฐัั
โโโ main.go           // ะทะฐะฟััะบ ัะตัะฒะตัะฐ
โโโ Dockerfile
โโโ docker-compose.yml
โโโ README.md
โโโ docs/             // Swagger
๐ฅ ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

ะะพะฑะฐะฒะธัั ะผะฐะณะฐะทะธะฝ:
POST /admin/shops
Authorization: Bearer <superadmin_token>

{
  "name": "Zara Mega",
  "description": "ะะฐะณะฐะทะธะฝ ะพะดะตะถะดั",
  "owner_id": 2
}
ะะพะฑะฐะฒะธัั ัะพัััะดะฝะธะบะฐ:
POST /owner/shops/1/employees
Authorization: Bearer <owner_token>

{
  "first_name": "ะะปะธ",
  "last_name": "ะะฑัะฐะณะธะผะพะฒ",
  "email": "ali@shop.kz",
  "password": "pass123",
  "position": "ะบะฐััะธั"
}
๐ ะะพะบัะผะตะฝัะฐัะธั

PDF-ะดะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ ะดะพัััะฟะฝะฐ ะฒ ัะฐะนะปะต:
๐ CRM_Backend_README.pdf

๐ง ะะฒัะพั

Zeinaddin Zurgambayev
Backend-ัะฐะทัะฐะฑะพััะธะบ | Golang | ะะฐะทะฐัััะฐะฝ ๐ฐ๐ฟ
LinkedIn https://www.linkedin.com/in/zeinaddin-zurgambaev-5b5a392bb/

๐ ะะปะฐะฝั ะฝะฐ ะฑัะดััะตะต

 ะะฐะบะฐะทั ะธ ะบะพัะทะธะฝั
 ะกัะฐัะธััะธะบะฐ ะธ ะพััััั
 ะะพะปะธ ะธ ะฟัะฐะฒะฐ ะดะพัััะฟะฐ (RBAC)
 UI ะดะปั ะฒะปะฐะดะตะปััะฐ ะธ ะฐะดะผะธะฝะฐ
 ะัะฟัะฐะฒะบะฐ email-ัะฒะตะดะพะผะปะตะฝะธะน
